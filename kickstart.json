{
  "variables": {
    "defaultTenantId": "d7d09513-a3f5-401c-9685-34ab6c552453",
    "adminApplicationId": "3c219e58-ed0e-4b18-ad48-f4f92793ae32",
    "vendorApplicationId": "0cc89d65-44e8-4662-940a-8e26c08b7a5e",
    "storeApplicationId": "7c3a8d37-0e74-4a40-bc9e-df1d1d3f3456",
    "fusionAuthBaseURL": "http://localhost:9011",
    "apiKeyId": "c6c0a7e5-8e1b-4e0e-8e5b-5a6c0a7e5a6c",
    "adminUserId": "00000000-0000-0000-0000-000000000001"
  },
  "apiKeys": [
    {
      "id": "#{apiKeyId}",
      "key": "#{FUSIONAUTH_API_KEY}",
      "description": "MercurJS integration API key (from environment)",
      "permissions": {
        "endpoints": {
          "/api/application": ["GET", "POST", "PUT", "PATCH", "DELETE"],
          "/api/user": ["GET", "POST", "PUT", "PATCH", "DELETE"],
          "/api/user/registration": ["GET", "POST", "PUT", "PATCH", "DELETE"],
          "/api/group": ["GET", "POST", "PUT", "PATCH", "DELETE"],
          "/api/group/member": ["GET", "POST", "PUT", "DELETE"]
        }
      }
    }
  ],
  "requests": [
    {
      "method": "PATCH",
      "url": "/api/tenant/#{defaultTenantId}",
      "body": {
        "tenant": {
          "name": "Market Express",
          "issuer": "marketexpress.us",
          "jwtConfiguration": {
            "accessTokenKeyId": "#{FUSIONAUTH_TENANT_ACCESS_TOKEN_SIGNING_KEY}",
            "idTokenKeyId": "#{FUSIONAUTH_TENANT_ID_TOKEN_SIGNING_KEY}",
            "timeToLiveInSeconds": 28800,
            "refreshTokenTimeToLiveInMinutes": 43200
          },
          "passwordValidationRules": {
            "minLength": 8,
            "requireMixedCase": false,
            "requireNonAlpha": false,
            "requireNumber": false,
            "validateOnLogin": true
          },
          "failedAuthenticationConfiguration": {
            "tooManyAttempts": 5,
            "actionDuration": 300,
            "actionDurationUnit": "SECONDS",
            "resetCountInSeconds": 3600
          }
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/application/#{adminApplicationId}",
      "tenantId": "#{defaultTenantId}",
      "body": {
        "application": {
          "name": "marketexpress-admin",
          "tenantId": "#{defaultTenantId}",
          "oauthConfiguration": {
            "authorizedRedirectURLs": [
              "http://localhost:9000/auth/fusionauth/callback",
              "http://localhost:9000/admin/auth/fusionauth/callback"
            ],
            "clientId": "#{adminApplicationId}",
            "clientSecret": "#{ADMIN_CLIENT_SECRET}",
            "clientAuthenticationPolicy": "Required",
            "enabledGrants": [
              "authorization_code",
              "refresh_token"
            ],
            "generateRefreshTokens": true,
            "logoutURL": "http://localhost:9000/admin/logout",
            "requireRegistration": true,
            "scopeHandlingPolicy": "Strict"
          },
          "jwtConfiguration": {
            "enabled": true,
            "timeToLiveInSeconds": 28800,
            "refreshTokenTimeToLiveInMinutes": 43200
          },
          "loginConfiguration": {
            "requireAuthentication": true,
            "allowTokenRefresh": true
          },
          "multiFactorConfiguration": {
            "loginPolicy": "Required",
            "email": {
              "templateId": "#{FUSIONAUTH_DEFAULT_EMAIL_TEMPLATE}"
            },
            "sms": {
              "templateId": "#{FUSIONAUTH_DEFAULT_SMS_TEMPLATE}"
            }
          },
          "registrationConfiguration": {
            "enabled": true,
            "type": "basic"
          },
          "roles": [
            {
              "name": "platform-admin",
              "description": "Full platform management capabilities including system configuration, user management, and vendor oversight",
              "isDefault": false,
              "isSuperRole": false
            },
            {
              "name": "platform-support",
              "description": "Read-only access with limited user management for customer support operations",
              "isDefault": false,
              "isSuperRole": false
            }
          ]
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/application/#{vendorApplicationId}",
      "tenantId": "#{defaultTenantId}",
      "body": {
        "application": {
          "name": "marketexpress-vendor",
          "tenantId": "#{defaultTenantId}",
          "oauthConfiguration": {
            "authorizedRedirectURLs": [
              "http://localhost:9000/auth/fusionauth/callback",
              "http://localhost:9000/vendor/auth/fusionauth/callback"
            ],
            "clientId": "#{vendorApplicationId}",
            "clientSecret": "#{VENDOR_CLIENT_SECRET}",
            "clientAuthenticationPolicy": "Required",
            "enabledGrants": [
              "authorization_code",
              "refresh_token"
            ],
            "generateRefreshTokens": true,
            "logoutURL": "http://localhost:9000/vendor/logout",
            "requireRegistration": true,
            "scopeHandlingPolicy": "Strict"
          },
          "jwtConfiguration": {
            "enabled": true,
            "timeToLiveInSeconds": 28800,
            "refreshTokenTimeToLiveInMinutes": 43200
          },
          "loginConfiguration": {
            "requireAuthentication": true,
            "allowTokenRefresh": true
          },
          "multiFactorConfiguration": {
            "loginPolicy": "Disabled"
          },
          "registrationConfiguration": {
            "enabled": true,
            "type": "basic"
          },
          "roles": [
            {
              "name": "vendor-owner",
              "description": "Full seller account control including financial settings, team management, and storefront configuration",
              "isDefault": false,
              "isSuperRole": false
            },
            {
              "name": "vendor-manager",
              "description": "Product, inventory, order, and team member management without financial or ownership controls",
              "isDefault": false,
              "isSuperRole": false
            },
            {
              "name": "vendor-staff",
              "description": "Order fulfillment and customer communication only, no product or team management",
              "isDefault": false,
              "isSuperRole": false
            }
          ]
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/application/#{storeApplicationId}",
      "tenantId": "#{defaultTenantId}",
      "body": {
        "application": {
          "name": "marketexpress-store",
          "tenantId": "#{defaultTenantId}",
          "oauthConfiguration": {
            "authorizedRedirectURLs": [
              "http://localhost:9000/auth/fusionauth/callback",
              "http://localhost:9000/store/auth/fusionauth/callback"
            ],
            "clientId": "#{storeApplicationId}",
            "clientSecret": "#{STORE_CLIENT_SECRET}",
            "clientAuthenticationPolicy": "Required",
            "enabledGrants": [
              "authorization_code",
              "refresh_token"
            ],
            "generateRefreshTokens": true,
            "logoutURL": "http://localhost:9000/store/logout",
            "requireRegistration": true,
            "scopeHandlingPolicy": "Strict"
          },
          "jwtConfiguration": {
            "enabled": true,
            "timeToLiveInSeconds": 28800,
            "refreshTokenTimeToLiveInMinutes": 43200
          },
          "loginConfiguration": {
            "requireAuthentication": true,
            "allowTokenRefresh": true
          },
          "multiFactorConfiguration": {
            "loginPolicy": "Disabled"
          },
          "registrationConfiguration": {
            "enabled": true,
            "type": "basic"
          },
          "roles": [
            {
              "name": "customer",
              "description": "Standard customer capabilities including browsing, purchasing, order tracking, and account management",
              "isDefault": true,
              "isSuperRole": false
            }
          ]
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/user/registration/#{adminUserId}",
      "body": {
        "user": {
          "id": "#{adminUserId}",
          "email": "#{FUSIONAUTH_ADMIN_EMAIL}",
          "password": "#{FUSIONAUTH_ADMIN_PASSWORD}",
          "firstName": "Platform",
          "lastName": "Administrator",
          "tenantId": "#{defaultTenantId}",
          "active": true,
          "verified": true
        },
        "registration": {
          "applicationId": "#{adminApplicationId}",
          "roles": ["platform-admin"]
        },
        "sendSetPasswordEmail": false,
        "skipVerification": true
      }
    }
  ]
}
